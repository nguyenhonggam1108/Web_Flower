
{% extends 'base.html' %}
{% block content %}
{% load humanize %}
{% load static %}
<div class="container my-5">
   <h2 class="text-center text-uppercase fw-bold mb-4">{{ category.name }}</h2>
<!--    <div class="row">-->
<!--    &lt;!&ndash; Sidebar danh mục &ndash;&gt;-->
<!--    <div class="col-md-3 mb-4">-->
<!--      <div class="card shadow-sm border-0">-->
<!--        <div class="card-header bg-success text-white fw-bold text-center">-->
<!--          <i class="bi bi-list"></i> Danh mục-->
<!--        </div>-->
<!--        <ul class="list-group list-group-flush">-->
<!--          {% for cat in categories %}-->
<!--            <li class="list-group-item {% if cat.id == category.id %}active{% endif %}">-->
<!--              <a href="{% url 'category_detail' cat.id %}"-->
<!--                 class="text-decoration-none {% if cat.id == category.id %}text-white{% else %}text-dark{% endif %}">-->
<!--                {{ cat.name }}-->
<!--              </a>-->
<!--            </li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->
  <div class="row g-4">
   {% if products %}
      {% for product in products %}
      <div class="col-6 col-md-4 col-lg-3">
        <div class="card product-card shadow-sm border-0 h-100">
          <!-- Ảnh sản phẩm -->
          <div class="image-wrapper">
              {% if product.image %}
                  <img src="{{ product.image.url }}" class="product-img" alt="{{ product.name }}">
                {% else %}
                  <img src="{% static 'images/no-image.png' %}" class="product-img" alt="Không có ảnh">
                {% endif %}
          </div>
          <!-- Nội dung -->
          <div class="card-body">
            <h5 class="card-title text-dark fw-semibold">
              <a href="{% url 'product_detail' product.id %}" class="product-link text-decoration-none text-dark">
                {{ product.name }}
              </a>
            </h5>
          </div>

          <!-- Giá & nút giỏ hàng -->
          <div class="card-footer bg-white d-flex justify-content-between align-items-center border-0">
            <p class="product-price">{{ product.price|floatformat:0|intcomma }} VND</p>
            <form action="{% url 'cart:add_to_cart' product.id %}" method="POST" class="m-0 p-0">
              {% csrf_token %}
              <input type="hidden" name="quantity" value="1">
              <button
                  class="btn btn-outline-success rounded-circle p-2 add-to-cart-btn"
                  data-product-id="{{ product.id }}">
                  <i class="bi bi-cart2"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p class="text-center text-muted">Hiện chưa có sản phẩm trong danh mục này.</p>
    {% endif %}
  </div>
</div>


{% endblock %}
