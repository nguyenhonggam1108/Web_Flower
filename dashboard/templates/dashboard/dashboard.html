{% extends 'dashboard/base_admin.html' %}
{% block title %}Trang quáº£n trá»‹{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>ðŸŒ¼ Thá»‘ng kÃª tá»•ng quan</h2>

  {% if user.is_superuser %}
  <li class="nav-item">
    <a class="nav-link text-warning" href="/admin/">
      <i class="bi bi-gear"></i>Quáº£n Trá»‹ Há»‡ Thá»‘ng
    </a>
  </li>
{% endif %}

  {% if low_stock_items %}
  <div class="alert alert-danger mt-3">
    <strong>âš  Cáº£nh bÃ¡o:</strong> Má»™t sá»‘ hoa sáº¯p háº¿t hÃ ng!
    <ul>
      {% for item in low_stock_items %}
        <li>{{ item.flower.name }}: cÃ²n {{ item.stock }} bÃ³</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <!-- âœ… DANH SÃCH CHá»¨C NÄ‚NG CHÃNH -->
  <div class="list-group mt-4 shadow-sm">
<!--      <a href="{% url 'inventory:manage_categories' %}" class="list-group-item list-group-item-action">ðŸ“‚ Quáº£n lÃ½ toÃ n bá»™ danh má»¥c</a>-->
    <a href="/admin/products/" class="list-group-item list-group-item-action">ðŸ“¦ Quáº£n lÃ½ sáº£n pháº©m</a>
    <a href="/admin/orders/" class="list-group-item list-group-item-action">ðŸ§¾ Quáº£n lÃ½ Ä‘Æ¡n hÃ ng</a>
    <a href="/inventory/import/" class="list-group-item list-group-item-action">ðŸ“¥ Nháº­p / Xuáº¥t NguyÃªn Liá»‡u</a>
    <a href="/inventory/report/" class="list-group-item list-group-item-action">ðŸ“Š Thá»‘ng kÃª kho</a>
  </div>

<!--Biá»ƒu Ä‘á»“ -->
<hr class="mt-5">
<h4 class="mt-4 mb-3">ðŸ“ˆ Thá»‘ng kÃª nháº­p â€“ xuáº¥t theo ngÃ y</h4>
<canvas id="inventoryChart" height="100"></canvas>

<!-- Náº¡p thÆ° viá»‡n Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('inventoryChart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: {{ labels|safe }},
      datasets: [
        {
          label: 'Nháº­p hÃ ng',
          data: {{ import_data|safe }},
          backgroundColor: 'rgba(54, 162, 235, 0.6)'
        },
        {
          label: 'Xuáº¥t hÃ ng',
          data: {{ export_data|safe }},
          backgroundColor: 'rgba(255, 99, 132, 0.6)'
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        x: { title: { display: true, text: 'NgÃ y' } },
        y: { title: { display: true, text: 'Sá»‘ lÆ°á»£ng (bÃ³)' }, beginAtZero: true }
      },
      plugins: {
        legend: { position: 'top' },
        title: {
          display: true,
          text: 'Biá»ƒu Ä‘á»“ thá»‘ng kÃª nháº­p â€“ xuáº¥t kho'
        }
      }
    }
  });
</script>
</div>
{% endblock %}
